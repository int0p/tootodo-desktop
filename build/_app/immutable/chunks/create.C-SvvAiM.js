import{s as B,y as E,z as $,l as X,u as w,m as V,o as y}from"./scheduler.LqW0zi1Y.js";import{S as q,i as x,b as K,d as U,m as j,t as D,a as T,e as z}from"./index.CBSmUvEG.js";import{g as G,a as Y}from"./index.DWLc_sPO.js";import{I as Z}from"./Icon.BiPwOCtT.js";import{o as ue,a as S,k as f,l as ce}from"./PageTemplete.Bwvhlo0b.js";import{m as P,c as fe,e as de,s as me,g as ee,i as ge,b as pe}from"./create.BBkgFTW7.js";import{g as _e}from"./id.BEkkLIk7.js";import{d as W,w as F}from"./index.CYC7l4Lj.js";function Ae(l){let e;const o=l[2].default,s=X(o,l,l[3],null);return{c(){s&&s.c()},l(n){s&&s.l(n)},m(n,t){s&&s.m(n,t),e=!0},p(n,t){s&&s.p&&(!e||t&8)&&w(s,o,n,n[3],e?y(o,n[3],t,null):V(n[3]),null)},i(n){e||(D(s,n),e=!0)},o(n){T(s,n),e=!1},d(n){s&&s.d(n)}}}function Ee(l){let e,o;const s=[{name:"book-plus"},l[1],{iconNode:l[0]}];let n={$$slots:{default:[Ae]},$$scope:{ctx:l}};for(let t=0;t<s.length;t+=1)n=E(n,s[t]);return e=new Z({props:n}),{c(){K(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,a){j(e,t,a),o=!0},p(t,[a]){const _=a&3?G(s,[s[0],a&2&&Y(t[1]),a&1&&{iconNode:t[0]}]):{};a&8&&(_.$$scope={dirty:a,ctx:t}),e.$set(_)},i(t){o||(D(e.$$.fragment,t),o=!0)},o(t){T(e.$$.fragment,t),o=!1},d(t){z(e,t)}}}function be(l,e,o){let{$$slots:s={},$$scope:n}=e;const t=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"}],["path",{d:"M9 10h6"}],["path",{d:"M12 7v6"}]];return l.$$set=a=>{o(1,e=E(E({},e),$(a))),"$$scope"in a&&o(3,n=a.$$scope)},e=$(e),[t,e,s,n]}class Fe extends q{constructor(e){super(),x(this,e,be,Ee,B,{})}}function he(l){let e;const o=l[2].default,s=X(o,l,l[3],null);return{c(){s&&s.c()},l(n){s&&s.l(n)},m(n,t){s&&s.m(n,t),e=!0},p(n,t){s&&s.p&&(!e||t&8)&&w(s,o,n,n[3],e?y(o,n[3],t,null):V(n[3]),null)},i(n){e||(D(s,n),e=!0)},o(n){T(s,n),e=!1},d(n){s&&s.d(n)}}}function Ie(l){let e,o;const s=[{name:"folder-open"},l[1],{iconNode:l[0]}];let n={$$slots:{default:[he]},$$scope:{ctx:l}};for(let t=0;t<s.length;t+=1)n=E(n,s[t]);return e=new Z({props:n}),{c(){K(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,a){j(e,t,a),o=!0},p(t,[a]){const _=a&3?G(s,[s[0],a&2&&Y(t[1]),a&1&&{iconNode:t[0]}]):{};a&8&&(_.$$scope={dirty:a,ctx:t}),e.$set(_)},i(t){o||(D(e.$$.fragment,t),o=!0)},o(t){T(e.$$.fragment,t),o=!1},d(t){z(e,t)}}}function Ne(l,e,o){let{$$slots:s={},$$scope:n}=e;const t=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"}]];return l.$$set=a=>{o(1,e=E(E({},e),$(a))),"$$scope"in a&&o(3,n=a.$$scope)},e=$(e),[t,e,s,n]}class Me extends q{constructor(e){super(),x(this,e,Ne,Ie,B,{})}}function Re(l){let e;const o=l[2].default,s=X(o,l,l[3],null);return{c(){s&&s.c()},l(n){s&&s.l(n)},m(n,t){s&&s.m(n,t),e=!0},p(n,t){s&&s.p&&(!e||t&8)&&w(s,o,n,n[3],e?y(o,n[3],t,null):V(n[3]),null)},i(n){e||(D(s,n),e=!0)},o(n){T(s,n),e=!1},d(n){s&&s.d(n)}}}function $e(l){let e,o;const s=[{name:"folder"},l[1],{iconNode:l[0]}];let n={$$slots:{default:[Re]},$$scope:{ctx:l}};for(let t=0;t<s.length;t+=1)n=E(n,s[t]);return e=new Z({props:n}),{c(){K(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,a){j(e,t,a),o=!0},p(t,[a]){const _=a&3?G(s,[s[0],a&2&&Y(t[1]),a&1&&{iconNode:t[0]}]):{};a&8&&(_.$$scope={dirty:a,ctx:t}),e.$set(_)},i(t){o||(D(e.$$.fragment,t),o=!0)},o(t){T(e.$$.fragment,t),o=!1},d(t){z(e,t)}}}function De(l,e,o){let{$$slots:s={},$$scope:n}=e;const t=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"}]];return l.$$set=a=>{o(1,e=E(E({},e),$(a))),"$$scope"in a&&o(3,n=a.$$scope)},e=$(e),[t,e,s,n]}class Be extends q{constructor(e){super(),x(this,e,De,$e,B,{})}}function Te(l){return l.offsetParent===null}const Ce={forceVisible:!1,defaultExpanded:[]},R={TABINDEX:"tabindex",EXPANDED:"aria-expanded",LABELLEDBY:"aria-labelledby",DATAID:"data-id"},{name:M}=fe("tree-view");function Xe(l){const e={...Ce,...l},{forceVisible:o}=e,s=F(null),n=F(null),t=e.expanded??F(e.defaultExpanded),a=ue(t,e==null?void 0:e.onExpandedChange),_=W([n],([r])=>r==null?void 0:r.getAttribute("data-id")),te=W([n],([r])=>c=>(r==null?void 0:r.getAttribute("data-id"))===c),ne=W([a],([r])=>c=>r.includes(c)),H=_e(["tree"]),se=P(M(),{returned:()=>({role:"tree","data-melt-id":H.tree})});let L=!1;const re=P(M("item"),{stores:[a,_,s],returned:([r,c,d])=>u=>{const{id:m,hasChildren:v}=u;let O=0;return d!==null&&(O=d===m?0:-1),{role:"treeitem","aria-selected":c===m,"data-id":m,tabindex:O,"aria-expanded":v?r.includes(m):void 0}},action:r=>{const c=de(S(r,"keydown",d=>{const{key:u}=d,m=pe(u);if(![f.ARROW_DOWN,f.ARROW_UP,f.ARROW_LEFT,f.ARROW_RIGHT,f.ENTER,f.SPACE,f.END,f.HOME,f.ASTERISK].includes(u)&&!m||!ee(H.tree)||!ge(r)||r.getAttribute("role")!=="treeitem")return;const g=oe(),A=g.findIndex(i=>i===r);if(u!==f.ENTER&&u!==f.SPACE&&d.preventDefault(),u===f.ENTER||u===f.SPACE)J(r),L=!0;else if(u===f.ARROW_DOWN&&A!==g.length-1){const i=g[A+1];if(!i)return;b(i)}else if(u===f.ARROW_UP&&A!==0){const i=g[A-1];if(!i)return;b(i)}else if(u===f.HOME&&A!==0){const i=g[0];if(!i)return;b(i)}else if(u===f.END&&A!=g.length-1){const i=ce(g);if(!i)return;b(i)}else if(u===f.ARROW_LEFT)if(Q(r))k(r);else{const i=r==null?void 0:r.closest('[role="group"]'),h=i==null?void 0:i.getAttribute("data-group-id"),I=g.find(p=>p.getAttribute("data-id")===h);if(!I)return;b(I)}else if(u===f.ARROW_RIGHT)if(Q(r)){const i=g[A+1];if(!i)return;b(i)}else ie(r)&&k(r);else if(m){const i=g.map(p=>{var N;return{value:(N=p.textContent)==null?void 0:N.toLowerCase().trim(),id:p.getAttribute("data-id")}});let h=-1,I=i.slice(A+1).some((p,N)=>{var C;return((C=p.value)==null?void 0:C.toLowerCase()[0])===u?(h=A+1+N,!0):!1});if(I||(I=i.slice(0,A).some((p,N)=>{var C;return((C=p.value)==null?void 0:C.toLowerCase().at(0))===u?(h=N,!0):!1})),I&&i[h].id){const p=g[h];if(!p)return;b(p)}}}),S(r,"click",async()=>{J(r),b(r),L||k(r),L=!1}),S(r,"focus",()=>{s.update(d=>r.getAttribute("data-id")??d)}));return{destroy(){c()}}}}),ae=P(M("group"),{stores:[a],returned:([r])=>c=>({role:"group","data-group-id":c.id,hidden:!o&&!r.includes(c.id)?!0:void 0,style:me({display:!o&&!r.includes(c.id)?"none":void 0})})});function b(r){s.update(c=>r.getAttribute("data-id")??c),r.focus()}function J(r){r.getAttribute(R.DATAID)&&n.set(r)}function oe(){let r=[];const c=ee(H.tree);return c&&(r=Array.from(c.querySelectorAll('[role="treeitem"]')).filter(d=>!Te(d))),r}function le(r){const c=r.hasAttribute(R.EXPANDED),d=r.getAttribute(R.EXPANDED),u=r.getAttribute(R.DATAID);return{hasChildren:c,expanded:d,dataId:u}}function k(r){const{hasChildren:c,expanded:d,dataId:u}=le(r);!c||d===null||u===null||(d==="false"?a.update(m=>[...m,u]):a.update(m=>m.filter(v=>v!==u)))}function ie(r){return r.hasAttribute(R.EXPANDED)}function Q(r){return r.getAttribute(R.EXPANDED)==="true"}return{ids:H,elements:{tree:se,item:re,group:ae},states:{expanded:a,selectedItem:n},helpers:{isExpanded:ne,isSelected:te}}}export{Fe as B,Be as F,Me as a,Xe as c};
